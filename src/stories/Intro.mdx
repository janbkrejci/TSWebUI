import { Meta } from "@storybook/addon-docs/blocks";

<Meta title="TSWebUI/TSTABLE" />

# TSTABLE

Kompletní client-side webový datagrid bez frameworku, pouze HTML, JS, CSS a Shoelace z CDN.

Je realizován jako web component. Stačí tedy naimportovat a do HTML vložit ```<ts-table></ts-table>```,
samozřejmě musíte grid nakrmit daty a dát mu potřebné parametry.

## Funkce - přehled

- stránkování, volba počtu položek na stránku
- řazení podle sloupců (vzestupně/sestupně/bez řazení)
- schovávání a změna pořadí sloupců
- řádková nabídka (menu pro každý řádek)
- filtrování podle sloupců (čísla, datum, text, výběr řádků)
- formátování čísel a dat podle české lokalizace
- výběr řádků (jednotlivě i hromadně, tri-state checkbox)
- akční menu pro jeden i více vybraných řádků
- export do Excelu, demo import z Excelu
- klikatelné řádky (např. pro detail)
- klikatelné vybrané sloupce (volitelně, např. pro akce nad buňkou)
- dark/light mód
- změna šířky sloupců

## Parametry (props)

<table>
  <thead>
    <tr>
      <th>Parametr</th>
      <th>Typ</th>
      <th>Význam</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>dark</td><td>boolean</td><td>Dark theme</td></tr>
    <tr><td>showCreateButton</td><td>boolean</td><td>Zobrazit tlačítko „Nový záznam“</td></tr>
    <tr><td>showImportButton</td><td>boolean</td><td>Zobrazit tlačítko „Importovat“</td></tr>
    <tr><td>showExportButton</td><td>boolean</td><td>Zobrazit tlačítko „Exportovat“</td></tr>
    <tr><td>showColumnSelector</td><td>boolean</td><td>Zobrazit volbu sloupců</td></tr>
    <tr><td>enableSorting</td><td>boolean</td><td>Povolit řazení</td></tr>
    <tr><td>enableFiltering</td><td>boolean</td><td>Povolit filtrování</td></tr>
    <tr><td>enableColumnResizing</td><td>boolean</td><td>Povolit změnu šířky sloupců</td></tr>
    <tr><td>enableColumnReordering</td><td>boolean</td><td>Povolit změnu pořadí sloupců</td></tr>
    <tr><td>enableSelection</td><td>boolean</td><td>Povolit výběr řádků</td></tr>
    <tr><td>enableRowMenu</td><td>boolean</td><td>Povolit menu pro řádek</td></tr>
    <tr><td>enableClickableRows</td><td>boolean</td><td>Povolit klikání na řádky</td></tr>
    <tr><td>enableClickableColumns</td><td>boolean</td><td>Povolit klikání na sloupce</td></tr>
    <tr><td>enablePagination</td><td>boolean</td><td>Povolit stránkování</td></tr>
    <tr><td>singleItemActions</td><td>string</td><td>Akce pro jeden vybraný řádek (např. edit/delete)</td></tr>
    <tr><td>multipleItemsActions</td><td>string</td><td>Akce pro více vybraných řádků</td></tr>
    <tr><td>visibleColumns</td><td>string</td><td>Viditelné sloupce (klíče, čárkou oddělené)</td></tr>
    <tr><td>unhideableColumns</td><td>string</td><td>Sloupce, které nelze skrýt</td></tr>
    <tr><td>unshowableColumns</td><td>string</td><td>Sloupce, které nelze zobrazit</td></tr>
    <tr><td>columnsRequiredForImport</td><td>string</td><td>Povinné sloupce pro import</td></tr>
    <tr><td>itemsPerPage</td><td>number</td><td>Počet položek na stránku</td></tr>
    <tr><td>itemsPerPageOptions</td><td>string</td><td>Volby počtu položek na stránku</td></tr>
  </tbody>
</table>

## Externí události (events)

Pouze eventy emitované přímo z `<ts-table>` (bublají z vnitřních komponent):

<table>
  <thead>
    <tr>
      <th>Event</th>
      <th>Detail (event.detail)</th>
      <th>Popis</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>create-new-record</td><td></td><td>Kliknutí na „Nový záznam“</td></tr>
    <tr><td>selection-action-activated</td><td> action, rows</td><td>Aktivace akce pro vybrané řádky</td></tr>
    <tr><td>row-clicked</td><td> row, columnKey</td><td>Kliknutí na řádek/sloupec</td></tr>
    <tr><td>do-import</td><td> importData, file</td><td>Import dat z Excelu</td></tr>
  </tbody>
</table>

Pokud je povoleno <code>enableClickableColumns</code>, event <code>row-clicked</code> obsahuje i klíč sloupce (<code>columnKey</code>).

## Struktura columnDefinition

Každý sloupec je definován objektem s následujícími atributy:

<table>
  <thead>
    <tr>
      <th>Atribut</th>
      <th>Typ</th>
      <th>Význam</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>key</td><td>string</td><td>Unikátní klíč sloupce (povinný)</td></tr>
    <tr><td>title</td><td>string</td><td>Zobrazovaný název sloupce</td></tr>
    <tr><td>type</td><td>string</td><td>Typ dat: "text", "number", "date", "boolean"</td></tr>
    <tr><td>sortable</td><td>boolean</td><td>Povolit řazení podle sloupce</td></tr>
    <tr><td>sortDirection</td><td>string</td><td>Aktuální směr řazení: "asc", "desc", "none"</td></tr>
    <tr><td>className</td><td>string</td><td>CSS třída pro sloupec</td></tr>
    <tr><td>filterable</td><td>boolean</td><td>Povolit filtrování</td></tr>
    <tr><td>filterPlaceholder</td><td>string</td><td>Placeholder pro filtr</td></tr>
    <tr><td>visible</td><td>boolean</td><td>Zda je sloupec viditelný</td></tr>
    <tr><td>align</td><td>string</td><td>Zarovnání: "left", "center", "right"</td></tr>
    <tr><td>order</td><td>number</td><td>Pořadí sloupce</td></tr>
    <tr><td>isClickable</td><td>boolean</td><td>Zda je sloupec klikatelný (pro eventy)</td></tr>
    <tr><td>canBeCopied</td><td>boolean</td><td>Zda lze hodnotu kopírovat</td></tr>
  </tbody>
</table>

Příklad:

```js
{
  key: "email",
  title: "E-mail",
  type: "text",
  sortable: false,
  sortDirection: "none",
  className: "",
  filterable: true,
  filterPlaceholder: "Filtr e-mailu",
  visible: false,
  align: "left",
  order: 3,
  canBeCopied: true,
  isClickable: true
}
```

# Licence

UNLICENSED – dělejte si s tím co chcete, ale nic po mně nechtějte :-)


